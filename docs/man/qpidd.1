.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.47.6.
.TH QPIDD "1" "October 2018" "qpidd (qpid-cpp) version 1.40.0" "User Commands"
.SH NAME

qpidd \- the Qpid AMQP Message Broker Daemon
.SH SYNOPSIS

qpidd [OPTIONS]
.SH DESCRIPTION

An AMQP message broker daemon that stores, routes and forwards
messages using the Advanced Message Queueing Protocol (AMQP).
.SH OPTIONS

The options below are built-in to qpidd. Installing add-on modules provides additional options. To see the full set of options available type "qpidd --help"

Options may be specified via command line, environment variable or configuration file. See FILES and ENVIRONMENT below for details.
.TP
\fB\-h\fR [ \fB\-\-help\fR ]
Displays the help message
.TP
\fB\-v\fR [ \fB\-\-version\fR ]
Displays version information
.TP
\fB\-\-config\fR FILE (/home/jross/.local/etc/qpid/qpidd.conf)
Reads configuration from FILE
.TP
\fB\-\-client\-config\fR FILE (/home/jross/.local/etc/qpid/qpidc.conf)
Reads client configuration from FILE
(for cluster interconnect)
.SS "Module options:"
.TP
\fB\-\-module\-dir\fR DIR (/home/jross/.local/lib64/qpid/daemon)
Load all shareable modules in this
directory
.TP
\fB\-\-load\-module\fR FILE
Specifies additional module(s) to be
loaded
.TP
\fB\-\-no\-module\-dir\fR
Don't load modules from module
directory
.SS "Broker Options:"
.TP
\fB\-\-data\-dir\fR DIR (/home/jross/.qpidd)
Directory to contain persistent data
generated by the broker
.TP
\fB\-\-no\-data\-dir\fR
Don't use a data directory.  No
persistent configuration will be loaded
or stored
.TP
\fB\-\-paging\-dir\fR DIR
Directory in which paging files will be
created for paged queues
.TP
\fB\-p\fR [ \fB\-\-port\fR ] PORT (5672)
Tells the broker to listen on PORT
.TP
\fB\-\-interface\fR <interface name>|<interface address>
Which network interfaces to use to
listen for incoming connections
.TP
\fB\-\-listen\-disable\fR <transport name>
Transports to disable listening
.TP
\fB\-\-protocols\fR <protocol name+version>
Which protocol versions to allow
.TP
\fB\-\-worker\-threads\fR N (9)
Sets the broker thread pool size
.TP
\fB\-\-connection\-backlog\fR N (10)
Sets the connection backlog limit for
the server socket
.TP
\fB\-m\fR [ \fB\-\-mgmt\-enable\fR ] yes|no (1)
Enable Management
.TP
\fB\-\-mgmt\-publish\fR yes|no (1)
Enable Publish of Management Data ('no'
implies query\-only)
.TP
\fB\-\-mgmt\-qmf2\fR yes|no (1)
Enable broadcast of management
information over QMF v2
.TP
\fB\-\-mgmt\-qmf1\fR yes|no (0)
Enable broadcast of management
information over QMF v1
.TP
\fB\-\-mgmt\-pub\-interval\fR SECONDS (10s)
Management Publish Interval
.TP
\fB\-\-queue\-purge\-interval\fR SECONDS (600s)
Interval between attempts to purge any
expired messages from queues
.TP
\fB\-\-auth\fR yes|no (1)
Enable authentication, if disabled all
incoming connections will be trusted
.TP
\fB\-\-realm\fR REALM (QPID)
Use the given realm when performing
authentication
.TP
\fB\-\-sasl\-service\-name\fR NAME
The service name to specify for SASL
.TP
\fB\-\-default\-queue\-limit\fR BYTES (104857600)
Default maximum size for queues (in
bytes)
.TP
\fB\-\-tcp\-nodelay\fR
Set TCP_NODELAY on TCP connections
.TP
\fB\-\-require\-encryption\fR
Only accept connections that are
encrypted
.TP
\fB\-\-known\-hosts\-url\fR URL or 'none' (none)
URL to send as 'known\-hosts' to clients
('none' implies empty list)
.TP
\fB\-\-sasl\-config\fR DIR
Allows SASL config path, if supported
by platform, to be overridden.  For
default location on Linux, see Cyrus
SASL documentation.  There is no SASL
config dir on Windows.
.TP
\fB\-\-default\-flow\-stop\-threshold\fR PERCENT (80)
Percent of queue's maximum capacity at
which flow control is activated.
.TP
\fB\-\-default\-flow\-resume\-threshold\fR PERCENT (70)
Percent of queue's maximum capacity at
which flow control is de\-activated.
.TP
\fB\-\-default\-event\-threshold\-ratio\fR %age of limit (80)
The ratio of any specified queue limit
at which an event will be raised
.TP
\fB\-\-default\-message\-group\fR GROUP\-IDENTIFER (qpid.no\-group)
Group identifier to assign to messages
delivered to a message group queue that
do not contain an identifier.
.TP
\fB\-\-enable\-timestamp\fR yes|no (0)
Add current time to each received
message.
.TP
\fB\-\-link\-maintenance\-interval\fR SECONDS (2s)
Interval to check federation link
health and re\-connect if need be
.TP
\fB\-\-link\-heartbeat\-interval\fR SECONDS (120s)
Heartbeat interval for a federation
link
.TP
\fB\-\-dtx\-default\-timeout\fR SECONDS (60)
Default timeout for DTX transaction
before aborting it
.TP
\fB\-\-dtx\-max\-timeout\fR SECONDS (3600)
Maximum allowed timeout for DTX
transaction. A value of zero disables
maximum timeout limit checks and allows
arbitrarily large timeout settings.
.TP
\fB\-\-max\-negotiate\-time\fR MILLISECONDS (10000)
Maximum time a connection can take to
send the initial protocol negotiation
.TP
\fB\-\-federation\-tag\fR NAME
Override the federation tag
.TP
\fB\-\-session\-max\-unacked\fR DELIVERIES (5000)
Maximum number of un\-acknowledged
outoing messages per session
.SS "Logging options:"
.TP
\fB\-t\fR [ \fB\-\-trace\fR ]
Enables all logging
.TP
\fB\-\-log\-enable\fR RULE (notice+)
Enables logging for selected levels and
components. RULE is in the form
\&'LEVEL[+\-][:PATTERN]'
LEVEL is one of:
.TP
trace debug info notice warning error
critical
PATTERN is a logging category name, or
a namespace\-qualified function name or
name fragment. Logging category names
are:
.TP
Security Broker Management Protocol
System HA Messaging Store Network Test
Client Application Model Unspecified
For example:
\&'\-\-log\-enable warning+'
logs all warning, error and critical
messages.
\&'\-\-log\-enable trace+:Broker'
logs all category 'Broker' messages.
\&'\-\-log\-enable debug:framing'
logs debug messages from all functions
with 'framing' in the namespace or
function name.
This option can be used multiple times
.TP
\fB\-\-log\-disable\fR RULE
Disables logging for selected levels
and components. RULE is in the form
\&'LEVEL[+\-][:PATTERN]'
LEVEL is one of:
.TP
trace debug info notice warning error
critical
PATTERN is a logging category name, or
a namespace\-qualified function name or
name fragment. Logging category names
are:
.TP
Security Broker Management Protocol
System HA Messaging Store Network Test
Client Application Model Unspecified
For example:
\&'\-\-log\-disable warning\-'
disables logging all warning, notice,
info, debug, and trace messages.
\&'\-\-log\-disable trace:Broker'
disables all category 'Broker' trace
messages.
\&'\-\-log\-disable debug\-:qmf::'
disables logging debug and trace
messages from all functions with
\&'qmf::' in the namespace.
This option can be used multiple times
.TP
\fB\-\-log\-time\fR yes|no (1)
Include time in log messages
.TP
\fB\-\-log\-level\fR yes|no (1)
Include severity level in log messages
.TP
\fB\-\-log\-source\fR yes|no (0)
Include source file:line in log
messages
.TP
\fB\-\-log\-thread\fR yes|no (0)
Include thread ID in log messages
.TP
\fB\-\-log\-function\fR yes|no (0)
Include function signature in log
messages
.TP
\fB\-\-log\-hires\-timestamp\fR yes|no (0)
Use hi\-resolution timestamps in log
messages
.TP
\fB\-\-log\-category\fR yes|no (1)
Include category in log messages
.TP
\fB\-\-log\-prefix\fR STRING
Prefix to prepend to all log messages
.SS "Logging sink options:"
.TP
\fB\-\-log\-to\-stderr\fR yes|no (1)
Send logging output to stderr
.TP
\fB\-\-log\-to\-stdout\fR yes|no (0)
Send logging output to stdout
.TP
\fB\-\-log\-to\-file\fR FILE
Send log output to FILE.
.TP
\fB\-\-log\-to\-syslog\fR yes|no (0)
Send logging output to syslog;
customize using \fB\-\-syslog\-name\fR and
\fB\-\-syslog\-facility\fR
.TP
\fB\-\-syslog\-name\fR NAME (qpidd)
Name to use in syslog messages
.TP
\fB\-\-syslog\-facility\fR LOG_XXX (LOG_DAEMON)
Facility to use in syslog messages
.SS "Daemon options:"
.TP
\fB\-d\fR [ \fB\-\-daemon\fR ]
Run as a daemon. Logs to syslog by
default in this mode.
.TP
\fB\-\-transport\fR TRANSPORT (tcp)
The transport for which to return the
port
.TP
\fB\-\-pid\-dir\fR DIR (/home/jross/.qpidd)
Directory where port\-specific PID file
is stored
.TP
\fB\-\-pidfile\fR FILE
File name to store the PID in daemon
mode. Used as\-is, no directory or
suffixes added.
.TP
\fB\-\-close\-fd\fR FD
File descriptors that the daemon should
close
.TP
\fB\-w\fR [ \fB\-\-wait\fR ] SECONDS (600)
Sets the maximum wait time to
initialize or shutdown the daemon. If
the daemon fails to initialize/shutdown
, prints an error and returns 1
.TP
\fB\-c\fR [ \fB\-\-check\fR ]
Prints the daemon's process ID to
stdout and returns 0 if the daemon is
running, otherwise returns 1
.TP
\fB\-q\fR [ \fB\-\-quit\fR ]
Tells the daemon to shut down with an
INT signal
.TP
\fB\-k\fR [ \fB\-\-kill\fR ]
Kill the daemon with a KILL signal.
.TP
\fB\-\-socket\-fd\fR FD
File descriptor for tcp listening
socket
.SS "ACL Options:"
.TP
\fB\-\-acl\-file\fR FILE
The policy file to load from, loaded
from data dir
.TP
\fB\-\-connection\-limit\-per\-user\fR N (0)
The maximum number of connections
allowed per user. 0 implies no limit.
.TP
\fB\-\-max\-connections\fR N (500)
The maximum combined number of
connections allowed. 0 implies no
limit.
.TP
\fB\-\-connection\-limit\-per\-ip\fR N (0)
The maximum number of connections
allowed per host IP address. 0 implies
no limit.
.TP
\fB\-\-max\-queues\-per\-user\fR N (0)
The maximum number of queues allowed
per user. 0 implies no limit.
.SS "SSL Settings:"
.TP
\fB\-\-ssl\-use\-export\-policy\fR
Use NSS export policy
.TP
\fB\-\-ssl\-cert\-password\-file\fR PATH
File containing password to use for
accessing certificate database
.TP
\fB\-\-ssl\-cert\-db\fR PATH
Path to directory containing
certificate database
.TP
\fB\-\-ssl\-cert\-name\fR NAME (localhost.localdomain)
Name of the certificate to use
.TP
\fB\-\-ssl\-port\fR PORT (5671)
Port on which to listen for SSL
connections
.TP
\fB\-\-ssl\-require\-client\-authentication\fR
Forces clients to authenticate in order
to establish an SSL connection
.TP
\fB\-\-ssl\-sasl\-no\-dict\fR
Disables SASL mechanisms that are
vulnerable to passive dictionary\-based
password attacks
.SS "AMQP 1.0 Options:"
.TP
\fB\-\-domain\fR DOMAIN
Domain of this broker
.TP
\fB\-\-queue\-patterns\fR PATTERN
Pattern for on\-demand queues
.TP
\fB\-\-topic\-patterns\fR PATTERN
Pattern for on\-demand topics
.SS "HA Options:"
.TP
\fB\-\-ha\-cluster\fR yes|no (0)
Join a HA active/passive cluster.
.TP
\fB\-\-ha\-queue\-replication\fR yes|no (0)
Enable replication of specific queues
without joining a cluster
.TP
\fB\-\-ha\-brokers\-url\fR URL
URL with address of each broker in the
cluster.
.TP
\fB\-\-ha\-public\-url\fR URL
URL advertized to clients to connect to
the cluster.
.TP
\fB\-\-ha\-replicate\fR LEVEL (none)
Replication level for creating queues
and exchanges if there is no
qpid.replicate argument supplied. LEVEL
is 'none', 'configuration' or 'all'
.TP
\fB\-\-ha\-username\fR USER
Username for connections between HA
brokers
.TP
\fB\-\-ha\-password\fR PASS
Password for connections between HA
brokers
.TP
\fB\-\-ha\-mechanism\fR MECH
Authentication mechanism for
connections between HA brokers
.TP
\fB\-\-ha\-backup\-timeout\fR SECONDS (10s)
Maximum time to wait for an expected
backup to connect and become ready.
.TP
\fB\-\-ha\-flow\-messages\fR N (1000)
Flow control message count limit for
replication, 0 means no limit
.TP
\fB\-\-ha\-flow\-bytes\fR N (0)
Flow control byte limit for
replication, 0 means no limit
.SS "Linear Store Options:"
.TP
\fB\-\-store\-dir\fR DIR
Store directory location for
persistence (instead of using
\fB\-\-data\-dir\fR value). Required if
\fB\-\-no\-data\-dir\fR is also used.
.TP
\fB\-\-truncate\fR yes|no (0)
If yes|true|1, will truncate the store
(discard any existing records). If
no|false|0, will preserve the existing
store files for recovery.
.TP
\fB\-\-wcache\-page\-size\fR N (16)
Size of the pages in the write page
cache in KiB. Allowable values \- powers
of 2 starting at 4 (4, 8, 16, 32...)
Lower values decrease latency at the
expense of throughput.
.TP
\fB\-\-wcache\-num\-pages\fR N (16)
Number of pages in the write page
cache. Minimum value: 4.
.TP
\fB\-\-tpl\-wcache\-page\-size\fR N (4)
Size of the pages in the transaction
prepared list write page cache in KiB.
Allowable values \- powers of 2 starting
at: 4 (4, 8, 16, 32...) Lower values
decrease latency at the expense of
throughput.
.TP
\fB\-\-tpl\-wcache\-num\-pages\fR N (16)
Number of pages in the transaction
prepared list write page cache. Minimum
value: 4.
.TP
\fB\-\-efp\-partition\fR N (1)
Empty File Pool partition to use for
finding empty journal files
.TP
\fB\-\-efp\-file\-size\fR N (2048)
Empty File Pool file size in KiB to use
for journal files. Must be a multiple
of 4 KiB.
.TP
\fB\-\-overwrite\-before\-return\fR yes|no (0)
If yes|true|1, will overwrite each
store file with zeros before returning
it to the Empty File Pool. When not in
use (the default), then old message
data remains in the file, but is
overwritten on next use. This option
should only be used where security
considerations justify it as it makes
the store somewhat slower.
.TP
\fB\-\-journal\-flush\-timeout\fR SECONDS (500ms)
Maximum time to wait to flush journal.
Use ms, us units for small time values
(eg 10ms) \- no space between value and
unit.
.SS "Store Options:"
.TP
\fB\-\-storage\-provider\fR PROVIDER
Name of the storage provider to use.
.SH ENVIRONMENT
.I QPID_<option>
.RS
There is an environment variable for each option.
.RE

The environment variable is the option name in uppercase, prefixed with QPID_ and '.' or '-' are replaced with '_'. Environment settings are over-ridden by command line settings. For example:

  export QPID_PORT=6000
  export QPID_MAX_CONNECTIONS=10
  export QPID_LOG_TO_FILE=/tmp/qpidd.log
.SH FILES
.I /etc/qpidd.conf
.RS
Default configuration file.
.RE

Configuration file settings are over-ridden by command line or environment variable settings. '--config <file>' or 'export QPID_CONFIG=<file>' specifies an alternate file.

Each line is a name=value pair. Blank lines and lines beginning with # are ignored. For example:

  # My qpidd configuration file.
  port=6000
  max-connections=10
  log-to-file=/tmp/qpidd.log
.SH AUTHOR

The Apache Qpid Project, dev@qpid.apache.org
.SH "REPORTING BUGS"

Please report bugs to users@qpid.apache.org
